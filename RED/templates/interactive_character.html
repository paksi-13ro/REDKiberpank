<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Интерактивный лист персонажа - Cyberpunk RED</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        /* Общие стили как в test.html */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', Courier, monospace;
            color: #333;
        }

        body {
            background: white;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .container {
            max-width: 100%;
            margin: 0;
            padding: 0;
        }

        /* Стили для альбомной ориентации */
        @media screen {
            .character-sheet-container {
                width: 100%;
                max-width: 1200px;
                margin: 0 auto;
                position: relative;
                background: white;
                padding: 25px;
                border: 4px solid #e63946;
                border-radius: 10px;
                box-shadow: 0 0 10px rgba(0,0,0,0.1);
            }
        }

        @media print {
            .character-sheet-container {
                width: 297mm;
                height: 210mm;
                padding: 15mm;
                margin: 0;
                box-shadow: none;
            }
            
            .no-print {
                display: none !important;
            }
        }

        .page {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            background: white;
            padding: 25px;
            border: 4px solid #e63946;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e63946;
        }

        .page-title {
            font-size: 24px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .cyberpunk-logo {
            font-family: 'Arial Black', Gadget, sans-serif;
            font-size: 20px;
            font-weight: bold;
            color: #e63946;
            letter-spacing: 1px;
        }

        .border-frame {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border: 3px solid #e63946;
            border-radius: 8px;
            pointer-events: none;
            z-index: -1;
        }

        .footer-line {
            position: absolute;
            bottom: 5px;
            left: 0;
            right: 0;
            height: 8px;
            background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxwYXRoIGQ9Ik0wLDUgTDEwLDIwIEwxNSwxMCBMMjAsMzAgTDI1LDEwIEwyOCwyMCBMMywzMCBMNSw1IEw3LDIwIEw5LDEwIEwxMSwzMCBMMTMsMTAgTDE1LDIwIEwxNywxMCBMMTksMzAgTDIxLDEwIEwyMywyMCBMNDUsMzAgTDQ3LDEwIEw0OSwyMCBMNTAsMTAgTDUyLDIwIEw1NCwxMCBMNTYsMjAgTDU4LDEwIEw2MCwyMCBMNjIsMTAgTDY0LDIwIEw2NiwxMCBMNjgsMjAgTDcwLDEwIEw3MiwyMCBMNzQsMTAgTDc2LDIwIEw3OCwxMCBMODAsMjAgTDgyLDEwIEw4NCwyMCBMODYsMTAgTDg4LDIwIEw5MCwxMCBMOTIsMjAgTDk0LDEwIEw5NiwyMCBMOTgtMTAgTDEwMCwyMCIgc3Ryb2tlPSIjZTYzOTQ2IiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiLz48L3N2Zz4=');
            background-repeat: repeat-x;
            background-position: bottom;
        }

        /* Основные блоки */
        .section {
            margin-bottom: 20px;
            border: 2px solid #e63946;
            border-radius: 5px;
            padding: 10px;
            background: #fff;
        }

        .section-title {
            background: #000;
            color: white;
            padding: 5px 10px;
            font-size: 14px;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 10px;
            border-radius: 3px;
        }

        .row {
            display: flex;
            margin: 0 -5px;
        }

        .col {
            padding: 0 5px;
            flex: 1;
        }

        .field {
            margin-bottom: 8px;
            padding: 5px;
            border: 1px solid #e63946;
            border-radius: 3px;
            background: white;
            min-height: 20px;
        }

        .field-label {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 12px;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 5px;
        }

        .table th,
        .table td {
            border: 1px solid #e63946;
            padding: 5px;
            text-align: left;
            font-size: 12px;
        }

        .table th {
            background: #000;
            color: white;
            font-weight: bold;
            text-transform: uppercase;
        }

        .stat-column {
            width: 30px;
            text-align: center;
        }

        .checkbox {
            display: inline-block;
            width: 12px;
            height: 12px;
            border: 1px solid #e63946;
            margin-right: 5px;
            vertical-align: middle;
        }

        .red-box {
            background: #e63946;
            color: white;
            padding: 2px 5px;
            font-size: 10px;
            font-weight: bold;
            display: inline-block;
            margin-left: 5px;
        }

        .note {
            font-size: 12px;
            margin-top: 10px;
            line-height: 1.4;
        }

        /* Специфичные стили для каждой страницы */

        /* Страница 1: Основная информация */
        .main-info {
            display: flex;
            gap: 15px;
        }

        .avatar-box {
            width: 150px;
            height: 150px;
            border: 2px solid #e63946;
            background: #f8f8f8;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #666;
        }

        .stats-sidebar {
            width: 30px;
            display: flex;
            flex-direction: column;
            gap: 5px;
            text-align: center;
            font-weight: bold;
        }

        .stat-box {
            padding: 5px;
            border: 1px solid #e63946;
            background: white;
            min-height: 25px;
        }

        .stat-name {
            font-size: 10px;
            text-transform: uppercase;
            margin-bottom: 3px;
        }

        .stat-value {
            font-size: 16px;
            font-weight: bold;
        }

        .weapons-table {
            margin-top: 10px;
        }

        .weapons-table th:first-child {
            width: 50%;
        }

        .weapons-table th:nth-child(2),
        .weapons-table th:nth-child(3) {
            width: 15%;
        }

        .weapons-table th:last-child {
            width: 20%;
        }

        /* Форма */
        .form-control {
            width: 100%;
            padding: 5px;
            border: 1px solid #e63946;
            border-radius: 3px;
            background: white;
            font-family: inherit;
            font-size: 12px;
        }

        .form-control:focus {
            outline: 1px solid #e63946;
        }

        .btn {
            padding: 10px 20px;
            background: #000;
            color: white;
            border: 2px solid #e63946;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 5px;
        }

        .btn:hover {
            background: #e63946;
        }

        .btn-group {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .page {
                padding: 10px;
            }
            .section {
                padding: 5px;
            }
            .field {
                padding: 3px;
            }
            .table th,
            .table td {
                padding: 3px;
                font-size: 10px;
            }
            
            .main-info {
                flex-direction: column;
            }
            
            .stats-sidebar {
                width: 100%;
                flex-direction: row;
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="character-sheet-container">
            <div class="border-frame"></div>
            <div class="footer-line"></div>
            <div class="page-header">
                <div class="page-title">Интерактивный лист персонажа</div>
                <div class="cyberpunk-logo">CYBERPUNK RED</div>
            </div>

            <form id="characterForm">
                <input type="hidden" id="characterId" name="id" value="{{ character.id if character else '' }}">
                
                <div class="main-info">
                    <div class="avatar-box">Аватар персонажа</div>
                    <div class="stats-sidebar">
                        {% set stats = [
                            ('ИНТ', 'intelligence'),
                            ('РЕА', 'reflexes'),
                            ('ЛВК', 'luck'),
                            ('ТЕХ', 'technique'),
                            ('ХАР', 'charisma'),
                            ('ВОЛЯ', 'willpower'),
                            ('УДЧ', 'udch'),
                            ('СКО', 'sko'),
                            ('ТЕЛ', 'tel'),
                            ('ЭМП', 'empathy')
                        ] %}
                        
                        {% for label, key in stats %}
                        <div class="stat-box">
                            <div class="stat-name">{{ label }}</div>
                            <div class="stat-value">
                                <input type="number" name="stat_{{ key }}" min="0" max="10" 
                                       value="{{ character['stat_' + key] if character and 'stat_' + key in character else 0 }}"
                                       class="form-control" style="width: 100%; text-align: center; font-size: 16px; background: transparent; border: none; padding: 0;">
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    <div class="col">
                        <div class="field">
                            <span class="field-label">Имя</span>
                            <input type="text" id="name" name="name" value="{{ character.name if character else '' }}" class="form-control" required>
                        </div>
                        <div class="field">
                            <span class="field-label">Роль</span>
                            <input type="text" id="role" name="role" value="{{ character.role if character else '' }}" class="form-control">
                        </div>
                        <div class="field">
                            <span class="field-label">Особая способность</span>
                            <input type="text" id="ability" name="ability" value="{{ character.ability if character else '' }}" class="form-control">
                        </div>
                        <div class="field">
                            <span class="field-label">Заметки</span>
                            <input type="text" id="notes" name="notes" value="{{ character.notes if character else '' }}" class="form-control">
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <div class="section">
                            <div class="section-title">Навыки восприятия</div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Навык</th>
                                        <th class="stat-column">УР</th>
                                        <th class="stat-column">STAT</th>
                                        <th class="stat-column">СУМ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Концентрация (Воля)</td>
                                        <td><input type="number" name="skill_concentration_level" value="{{ character.skill_concentration_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_concentration_stat" value="{{ character.skill_concentration_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_concentration_sum" value="{{ character.skill_concentration_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Слух/Обоняние объекта (ИНТ)</td>
                                        <td><input type="number" name="skill_hearing_level" value="{{ character.skill_hearing_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_hearing_stat" value="{{ character.skill_hearing_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_hearing_sum" value="{{ character.skill_hearing_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Чтение по губам (ИНТ)</td>
                                        <td><input type="number" name="skill_lip_reading_level" value="{{ character.skill_lip_reading_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_lip_reading_stat" value="{{ character.skill_lip_reading_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_lip_reading_sum" value="{{ character.skill_lip_reading_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Внимательность (ИНТ)</td>
                                        <td><input type="number" name="skill_attention_level" value="{{ character.skill_attention_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_attention_stat" value="{{ character.skill_attention_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_attention_sum" value="{{ character.skill_attention_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Выслеживание (ИНТ)</td>
                                        <td><input type="number" name="skill_tracking_level" value="{{ character.skill_tracking_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_tracking_stat" value="{{ character.skill_tracking_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_tracking_sum" value="{{ character.skill_tracking_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col">
                        <div class="section">
                            <div class="section-title">Физические навыки</div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Навык</th>
                                        <th class="stat-column">УР</th>
                                        <th class="stat-column">STAT</th>
                                        <th class="stat-column">СУМ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Атлетика (ЛВК)</td>
                                        <td><input type="number" name="skill_athletics_level" value="{{ character.skill_athletics_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_athletics_stat" value="{{ character.skill_athletics_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_athletics_sum" value="{{ character.skill_athletics_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Акробатика (ЛВК)</td>
                                        <td><input type="number" name="skill_acrobatics_level" value="{{ character.skill_acrobatics_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_acrobatics_stat" value="{{ character.skill_acrobatics_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_acrobatics_sum" value="{{ character.skill_acrobatics_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Точность (ЛВК)</td>
                                        <td><input type="number" name="skill_accuracy_level" value="{{ character.skill_accuracy_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_accuracy_stat" value="{{ character.skill_accuracy_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_accuracy_sum" value="{{ character.skill_accuracy_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Выносливость (ВОЛЯ)</td>
                                        <td><input type="number" name="skill_endurance_level" value="{{ character.skill_endurance_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_endurance_stat" value="{{ character.skill_endurance_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_endurance_sum" value="{{ character.skill_endurance_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Сопр. пыткам/наркотикам (ВОЛЯ)</td>
                                        <td><input type="number" name="skill_resistance_level" value="{{ character.skill_resistance_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_resistance_stat" value="{{ character.skill_resistance_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_resistance_sum" value="{{ character.skill_resistance_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Скрытность (ЛВК)</td>
                                        <td><input type="number" name="skill_stealth_level" value="{{ character.skill_stealth_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_stealth_stat" value="{{ character.skill_stealth_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_stealth_sum" value="{{ character.skill_stealth_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col">
                        <div class="section">
                            <div class="section-title">Навыки управления</div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Навык</th>
                                        <th class="stat-column">УР</th>
                                        <th class="stat-column">STAT</th>
                                        <th class="stat-column">СУМ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Вождение (РЕА)</td>
                                        <td><input type="number" name="skill_driving_level" value="{{ character.skill_driving_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_driving_stat" value="{{ character.skill_driving_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_driving_sum" value="{{ character.skill_driving_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Пилотирование (x2) (РЕА)</td>
                                        <td><input type="number" name="skill_piloting_level" value="{{ character.skill_piloting_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_piloting_stat" value="{{ character.skill_piloting_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_piloting_sum" value="{{ character.skill_piloting_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Судоходство (РЕА)</td>
                                        <td><input type="number" name="skill_seafaring_level" value="{{ character.skill_seafaring_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_seafaring_stat" value="{{ character.skill_seafaring_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_seafaring_sum" value="{{ character.skill_seafaring_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Верховая езда (РЕА)</td>
                                        <td><input type="number" name="skill_riding_level" value="{{ character.skill_riding_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_riding_stat" value="{{ character.skill_riding_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_riding_sum" value="{{ character.skill_riding_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <div class="section">
                            <div class="section-title">Образовательные навыки</div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Навык</th>
                                        <th class="stat-column">УР</th>
                                        <th class="stat-column">STAT</th>
                                        <th class="stat-column">СУМ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Бухгалтерия (ИНТ)</td>
                                        <td><input type="number" name="skill_accounting_level" value="{{ character.skill_accounting_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_accounting_stat" value="{{ character.skill_accounting_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_accounting_sum" value="{{ character.skill_accounting_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Обращение с животными (ИНТ)</td>
                                        <td><input type="number" name="skill_animal_handling_level" value="{{ character.skill_animal_handling_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_animal_handling_stat" value="{{ character.skill_animal_handling_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_animal_handling_sum" value="{{ character.skill_animal_handling_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Бюрократия (ИНТ)</td>
                                        <td><input type="number" name="skill_bureaucracy_level" value="{{ character.skill_bureaucracy_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_bureaucracy_stat" value="{{ character.skill_bureaucracy_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_bureaucracy_sum" value="{{ character.skill_bureaucracy_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Бизнес (ИНТ)</td>
                                        <td><input type="number" name="skill_business_level" value="{{ character.skill_business_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_business_stat" value="{{ character.skill_business_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_business_sum" value="{{ character.skill_business_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Коммуникации (ИНТ)</td>
                                        <td><input type="number" name="skill_communications_level" value="{{ character.skill_communications_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_communications_stat" value="{{ character.skill_communications_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_communications_sum" value="{{ character.skill_communications_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Криминология (ИНТ)</td>
                                        <td><input type="number" name="skill_criminology_level" value="{{ character.skill_criminology_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_criminology_stat" value="{{ character.skill_criminology_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_criminology_sum" value="{{ character.skill_criminology_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Криптография (ИНТ)</td>
                                        <td><input type="number" name="skill_cryptography_level" value="{{ character.skill_cryptography_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_cryptography_stat" value="{{ character.skill_cryptography_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_cryptography_sum" value="{{ character.skill_cryptography_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Дедукция (ИНТ)</td>
                                        <td><input type="number" name="skill_deduction_level" value="{{ character.skill_deduction_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_deduction_stat" value="{{ character.skill_deduction_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_deduction_sum" value="{{ character.skill_deduction_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Образование (ИНТ)</td>
                                        <td><input type="number" name="skill_education_level" value="{{ character.skill_education_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_education_stat" value="{{ character.skill_education_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_education_sum" value="{{ character.skill_education_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Азартные игры (ИНТ)</td>
                                        <td><input type="number" name="skill_gambling_level" value="{{ character.skill_gambling_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_gambling_stat" value="{{ character.skill_gambling_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_gambling_sum" value="{{ character.skill_gambling_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col">
                        <div class="section">
                            <div class="section-title">Образовательные навыки</div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Навык</th>
                                        <th class="stat-column">УР</th>
                                        <th class="stat-column">STAT</th>
                                        <th class="stat-column">СУМ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Язык (ИНТ)</td>
                                        <td><input type="number" name="skill_language_level" value="{{ character.skill_language_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_language_stat" value="{{ character.skill_language_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_language_sum" value="{{ character.skill_language_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Уличный сленг</td>
                                        <td><input type="number" name="skill_street_slang_level" value="{{ character.skill_street_slang_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_street_slang_stat" value="{{ character.skill_street_slang_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_street_slang_sum" value="{{ character.skill_street_slang_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Поиск информации (ИНТ)</td>
                                        <td><input type="number" name="skill_information_search_level" value="{{ character.skill_information_search_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_information_search_stat" value="{{ character.skill_information_search_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_information_search_sum" value="{{ character.skill_information_search_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Знание местности (ИНТ)</td>
                                        <td><input type="number" name="skill_local_knowledge_level" value="{{ character.skill_local_knowledge_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_local_knowledge_stat" value="{{ character.skill_local_knowledge_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_local_knowledge_sum" value="{{ character.skill_local_knowledge_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Твой дом</td>
                                        <td><input type="number" name="skill_your_home_level" value="{{ character.skill_your_home_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_your_home_stat" value="{{ character.skill_your_home_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_your_home_sum" value="{{ character.skill_your_home_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Наука (ИНТ)</td>
                                        <td><input type="number" name="skill_science_level" value="{{ character.skill_science_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_science_stat" value="{{ character.skill_science_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_science_sum" value="{{ character.skill_science_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Техника (ИНТ)</td>
                                        <td><input type="number" name="skill_technology_level" value="{{ character.skill_technology_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_technology_stat" value="{{ character.skill_technology_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_technology_sum" value="{{ character.skill_technology_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Выживание в пустыне (ИНТ)</td>
                                        <td><input type="number" name="skill_desert_survival_level" value="{{ character.skill_desert_survival_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_desert_survival_stat" value="{{ character.skill_desert_survival_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_desert_survival_sum" value="{{ character.skill_desert_survival_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col">
                        <div class="section">
                            <div class="section-title">Навыки ближнего боя</div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Навык</th>
                                        <th class="stat-column">УР</th>
                                        <th class="stat-column">STAT</th>
                                        <th class="stat-column">СУМ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Рукопашный бой (ЛВК)</td>
                                        <td><input type="number" name="skill_hand_to_hand_level" value="{{ character.skill_hand_to_hand_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_hand_to_hand_stat" value="{{ character.skill_hand_to_hand_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_hand_to_hand_sum" value="{{ character.skill_hand_to_hand_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Уклонение (ЛВК)</td>
                                        <td><input type="number" name="skill_dodge_level" value="{{ character.skill_dodge_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_dodge_stat" value="{{ character.skill_dodge_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_dodge_sum" value="{{ character.skill_dodge_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Боевые искусства (x2) (ЛВК)</td>
                                        <td><input type="number" name="skill_martial_arts_level" value="{{ character.skill_martial_arts_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_martial_arts_stat" value="{{ character.skill_martial_arts_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_martial_arts_sum" value="{{ character.skill_martial_arts_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Оружие ближнего боя (ЛВК)</td>
                                        <td><input type="number" name="skill_melee_weapons_level" value="{{ character.skill_melee_weapons_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_melee_weapons_stat" value="{{ character.skill_melee_weapons_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_melee_weapons_sum" value="{{ character.skill_melee_weapons_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <div class="section">
                            <div class="section-title">Сценические навыки</div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Навык</th>
                                        <th class="stat-column">УР</th>
                                        <th class="stat-column">STAT</th>
                                        <th class="stat-column">СУМ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Актерское мастерство (ХАР)</td>
                                        <td><input type="number" name="skill_acting_level" value="{{ character.skill_acting_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_acting_stat" value="{{ character.skill_acting_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_acting_sum" value="{{ character.skill_acting_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Игра на инструменте (ТЕХ)</td>
                                        <td><input type="number" name="skill_playing_instrument_level" value="{{ character.skill_playing_instrument_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_playing_instrument_stat" value="{{ character.skill_playing_instrument_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_playing_instrument_sum" value="{{ character.skill_playing_instrument_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col">
                        <div class="section">
                            <div class="section-title">Навыки дальнего боя</div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Навык</th>
                                        <th class="stat-column">УР</th>
                                        <th class="stat-column">STAT</th>
                                        <th class="stat-column">СУМ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Стрельба из лука (РЕА)</td>
                                        <td><input type="number" name="skill_archery_level" value="{{ character.skill_archery_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_archery_stat" value="{{ character.skill_archery_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_archery_sum" value="{{ character.skill_archery_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Автоматический огонь (x2) (РЕА)</td>
                                        <td><input type="number" name="skill_automatic_fire_level" value="{{ character.skill_automatic_fire_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_automatic_fire_stat" value="{{ character.skill_automatic_fire_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_automatic_fire_sum" value="{{ character.skill_automatic_fire_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Пистолеты (РЕА)</td>
                                        <td><input type="number" name="skill_pistols_level" value="{{ character.skill_pistols_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_pistols_stat" value="{{ character.skill_pistols_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_pistols_sum" value="{{ character.skill_pistols_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col">
                        <div class="section">
                            <div class="section-title">Навыки дальнего боя</div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Навык</th>
                                        <th class="stat-column">УР</th>
                                        <th class="stat-column">STAT</th>
                                        <th class="stat-column">СУМ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Оружие крупного кал. (x2) (РЕА)</td>
                                        <td><input type="number" name="skill_heavy_weapons_level" value="{{ character.skill_heavy_weapons_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_heavy_weapons_stat" value="{{ character.skill_heavy_weapons_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_heavy_weapons_sum" value="{{ character.skill_heavy_weapons_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Тактическое оружие (РЕА)</td>
                                        <td><input type="number" name="skill_tactical_weapons_level" value="{{ character.skill_tactical_weapons_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_tactical_weapons_stat" value="{{ character.skill_tactical_weapons_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_tactical_weapons_sum" value="{{ character.skill_tactical_weapons_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <div class="section">
                            <div class="section-title">Социальные навыки</div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Навык</th>
                                        <th class="stat-column">УР</th>
                                        <th class="stat-column">STAT</th>
                                        <th class="stat-column">СУМ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Подкуп (ХАР)</td>
                                        <td><input type="number" name="skill_bribery_level" value="{{ character.skill_bribery_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_bribery_stat" value="{{ character.skill_bribery_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_bribery_sum" value="{{ character.skill_bribery_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Общение (ЭМП)</td>
                                        <td><input type="number" name="skill_socializing_level" value="{{ character.skill_socializing_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_socializing_stat" value="{{ character.skill_socializing_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_socializing_sum" value="{{ character.skill_socializing_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Проницательность (ЭМП)</td>
                                        <td><input type="number" name="skill_perceptiveness_level" value="{{ character.skill_perceptiveness_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_perceptiveness_stat" value="{{ character.skill_perceptiveness_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_perceptiveness_sum" value="{{ character.skill_perceptiveness_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Дипломатия (ХАР)</td>
                                        <td><input type="number" name="skill_diplomacy_level" value="{{ character.skill_diplomacy_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_diplomacy_stat" value="{{ character.skill_diplomacy_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_diplomacy_sum" value="{{ character.skill_diplomacy_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Убеждение (ХАР)</td>
                                        <td><input type="number" name="skill_persuasion_level" value="{{ character.skill_persuasion_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_persuasion_stat" value="{{ character.skill_persuasion_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_persuasion_sum" value="{{ character.skill_persuasion_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Уход за собой (ХАР)</td>
                                        <td><input type="number" name="skill_personal_grooming_level" value="{{ character.skill_personal_grooming_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_personal_grooming_stat" value="{{ character.skill_personal_grooming_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_personal_grooming_sum" value="{{ character.skill_personal_grooming_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Этикет Улиц (ХАР)</td>
                                        <td><input type="number" name="skill_street_etiquette_level" value="{{ character.skill_street_etiquette_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_street_etiquette_stat" value="{{ character.skill_street_etiquette_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_street_etiquette_sum" value="{{ character.skill_street_etiquette_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Торговля (ХАР)</td>
                                        <td><input type="number" name="skill_trading_level" value="{{ character.skill_trading_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_trading_stat" value="{{ character.skill_trading_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_trading_sum" value="{{ character.skill_trading_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Гердероб и стиль (ХАР)</td>
                                        <td><input type="number" name="skill_wardrobe_style_level" value="{{ character.skill_wardrobe_style_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_wardrobe_style_stat" value="{{ character.skill_wardrobe_style_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_wardrobe_style_sum" value="{{ character.skill_wardrobe_style_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col">
                        <div class="section">
                            <div class="section-title">Технические навыки</div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Навык</th>
                                        <th class="stat-column">УР</th>
                                        <th class="stat-column">STAT</th>
                                        <th class="stat-column">СУМ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Авиационные технологии (ТЕХ)</td>
                                        <td><input type="number" name="skill_aeronautics_technology_level" value="{{ character.skill_aeronautics_technology_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_aeronautics_technology_stat" value="{{ character.skill_aeronautics_technology_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_aeronautics_technology_sum" value="{{ character.skill_aeronautics_technology_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Знание техники (ТЕХ)</td>
                                        <td><input type="number" name="skill_technical_knowledge_level" value="{{ character.skill_technical_knowledge_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_technical_knowledge_stat" value="{{ character.skill_technical_knowledge_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_technical_knowledge_sum" value="{{ character.skill_technical_knowledge_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Кибертехника (ТЕХ)</td>
                                        <td><input type="number" name="skill_cybertechnology_level" value="{{ character.skill_cybertechnology_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_cybertechnology_stat" value="{{ character.skill_cybertechnology_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_cybertechnology_sum" value="{{ character.skill_cybertechnology_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Подрывник (x2) (ТЕХ)</td>
                                        <td><input type="number" name="skill_demolitionist_level" value="{{ character.skill_demolitionist_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_demolitionist_stat" value="{{ character.skill_demolitionist_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_demolitionist_sum" value="{{ character.skill_demolitionist_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Электроника/Безопасность (x2) (ТЕХ)</td>
                                        <td><input type="number" name="skill_electronics_security_level" value="{{ character.skill_electronics_security_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_electronics_security_stat" value="{{ character.skill_electronics_security_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_electronics_security_sum" value="{{ character.skill_electronics_security_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Первая помощь (ТЕХ)</td>
                                        <td><input type="number" name="skill_first_aid_level" value="{{ character.skill_first_aid_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_first_aid_stat" value="{{ character.skill_first_aid_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_first_aid_sum" value="{{ character.skill_first_aid_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Фольсификация (ТЕХ)</td>
                                        <td><input type="number" name="skill_forgery_level" value="{{ character.skill_forgery_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_forgery_stat" value="{{ character.skill_forgery_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_forgery_sum" value="{{ character.skill_forgery_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Автомеханика (ТЕХ)</td>
                                        <td><input type="number" name="skill_automotive_mechanics_level" value="{{ character.skill_automotive_mechanics_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_automotive_mechanics_stat" value="{{ character.skill_automotive_mechanics_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_automotive_mechanics_sum" value="{{ character.skill_automotive_mechanics_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Художественное ремесло (ТЕХ)</td>
                                        <td><input type="number" name="skill_artistic_craft_level" value="{{ character.skill_artistic_craft_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_artistic_craft_stat" value="{{ character.skill_artistic_craft_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_artistic_craft_sum" value="{{ character.skill_artistic_craft_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Парамедик (x2) (ТЕХ)</td>
                                        <td><input type="number" name="skill_paramedic_level" value="{{ character.skill_paramedic_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_paramedic_stat" value="{{ character.skill_paramedic_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_paramedic_sum" value="{{ character.skill_paramedic_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Кино- и фототехника (ТЕХ)</td>
                                        <td><input type="number" name="skill_cinema_photography_level" value="{{ character.skill_cinema_photography_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_cinema_photography_stat" value="{{ character.skill_cinema_photography_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_cinema_photography_sum" value="{{ character.skill_cinema_photography_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Взлом замков (ТЕХ)</td>
                                        <td><input type="number" name="skill_lock_picking_level" value="{{ character.skill_lock_picking_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_lock_picking_stat" value="{{ character.skill_lock_picking_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_lock_picking_sum" value="{{ character.skill_lock_picking_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Кормление (ТЕХ)</td>
                                        <td><input type="number" name="skill_feeding_level" value="{{ character.skill_feeding_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_feeding_stat" value="{{ character.skill_feeding_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_feeding_sum" value="{{ character.skill_feeding_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Морские технологии (ТЕХ)</td>
                                        <td><input type="number" name="skill_marine_technology_level" value="{{ character.skill_marine_technology_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_marine_technology_stat" value="{{ character.skill_marine_technology_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_marine_technology_sum" value="{{ character.skill_marine_technology_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                    <tr>
                                        <td>Оружейник (ТЕХ)</td>
                                        <td><input type="number" name="skill_weaponsmith_level" value="{{ character.skill_weaponsmith_level if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_weaponsmith_stat" value="{{ character.skill_weaponsmith_stat if character else '' }}" class="form-control" style="width: 100%;"></td>
                                        <td><input type="text" name="skill_weaponsmith_sum" value="{{ character.skill_weaponsmith_sum if character else '' }}" class="form-control" style="width: 100%;"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <div class="section">
                            <div class="section-title">Человечность</div>
                            <div class="field" style="display: flex; align-items: center;">
                                <span>Человечность</span>
                                <input type="text" name="humanity_current" value="{{ character.humanity_current if character else '' }}" class="form-control" style="margin-left: 10px; width: 60px;">
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="section">
                            <div class="section-title">Пункты здоровья</div>
                            <div class="field" style="display: flex; align-items: center;">
                                <span>Пункты здоровья</span>
                                <input type="text" name="health_points_current" value="{{ character.health_points_current if character else '' }}" class="form-control" style="margin-left: 10px; width: 60px;">
                            </div>
                            <div class="field">
                                <span class="field-label">Тяжёлое ранение</span>
                                <input type="text" name="serious_injury" value="{{ character.serious_injury if character else '' }}" class="form-control">
                            </div>
                            <div class="field">
                                <span class="field-label">-2 на все Действия с Тяжёлым ранением</span>
                                <input type="text" name="heavy_injury_penalty" value="{{ character.heavy_injury_penalty if character else '' }}" class="form-control">
                            </div>
                            <div class="field">
                                <span class="field-label">Испытание против смерти</span>
                                <input type="text" name="death_save" value="{{ character.death_save if character else '' }}" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="section">
                            <div class="section-title">Критические травмы</div>
                            <div class="field">
                                <span class="field-label">Зависимости</span>
                                <input type="text" name="dependencies" value="{{ character.dependencies if character else '' }}" class="form-control">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">ОРУЖИЕ и БРОНЯ</div>
                    <div class="row">
                        <div class="col">
                            <div class="section-title">Броня</div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Защита головы</th>
                                        <th class="stat-column">ОС</th>
                                        <th class="stat-column">Штраф</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><input type="text" name="armor_head" value="{{ character.armor_head if character else '' }}" class="form-control"></td>
                                        <td><input type="text" name="armor_head_sp" value="{{ character.armor_head_sp if character else '' }}" class="form-control"></td>
                                        <td><input type="text" name="armor_head_penalty" value="{{ character.armor_head_penalty if character else '' }}" class="form-control"></td>
                                    </tr>
                                    <tr>
                                        <td><input type="text" name="armor_body" value="{{ character.armor_body if character else '' }}" class="form-control"></td>
                                        <td><input type="text" name="armor_body_sp" value="{{ character.armor_body_sp if character else '' }}" class="form-control"></td>
                                        <td><input type="text" name="armor_body_penalty" value="{{ character.armor_body_penalty if character else '' }}" class="form-control"></td>
                                    </tr>
                                    <tr>
                                        <td><input type="text" name="armor_shield" value="{{ character.armor_shield if character else '' }}" class="form-control"></td>
                                        <td><input type="text" name="armor_shield_sp" value="{{ character.armor_shield_sp if character else '' }}" class="form-control"></td>
                                        <td><input type="text" name="armor_shield_penalty" value="{{ character.armor_shield_penalty if character else '' }}" class="form-control"></td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="field" style="font-size: 10px; margin-top: 5px;">
                                Штрафы применяются к РЕА, ЛВК и СКО
                            </div>
                        </div>
                        <div class="col">
                            <div class="section-title">Оружие</div>
                            <table class="table weapons-table">
                                <thead>
                                    <tr>
                                        <th>Оружие</th>
                                        <th>Урон</th>
                                        <th>Боепр.</th>
                                        <th>ROF</th>
                                        <th>Заметки</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><input type="text" name="weapon_1_name" value="{{ character.weapon_1_name if character else '' }}" class="form-control"></td>
                                        <td><input type="text" name="weapon_1_damage" value="{{ character.weapon_1_damage if character else '' }}" class="form-control"></td>
                                        <td><input type="text" name="weapon_1_ammo" value="{{ character.weapon_1_ammo if character else '' }}" class="form-control"></td>
                                        <td><input type="text" name="weapon_1_rof" value="{{ character.weapon_1_rof if character else '' }}" class="form-control"></td>
                                        <td><input type="text" name="weapon_1_notes" value="{{ character.weapon_1_notes if character else '' }}" class="form-control"></td>
                                    </tr>
                                    <tr>
                                        <td><input type="text" name="weapon_2_name" value="{{ character.weapon_2_name if character else '' }}" class="form-control"></td>
                                        <td><input type="text" name="weapon_2_damage" value="{{ character.weapon_2_damage if character else '' }}" class="form-control"></td>
                                        <td><input type="text" name="weapon_2_ammo" value="{{ character.weapon_2_ammo if character else '' }}" class="form-control"></td>
                                        <td><input type="text" name="weapon_2_rof" value="{{ character.weapon_2_rof if character else '' }}" class="form-control"></td>
                                        <td><input type="text" name="weapon_2_notes" value="{{ character.weapon_2_notes if character else '' }}" class="form-control"></td>
                                    </tr>
                                    <tr>
                                        <td><input type="text" name="weapon_3_name" value="{{ character.weapon_3_name if character else '' }}" class="form-control"></td>
                                        <td><input type="text" name="weapon_3_damage" value="{{ character.weapon_3_damage if character else '' }}" class="form-control"></td>
                                        <td><input type="text" name="weapon_3_ammo" value="{{ character.weapon_3_ammo if character else '' }}" class="form-control"></td>
                                        <td><input type="text" name="weapon_3_rof" value="{{ character.weapon_3_rof if character else '' }}" class="form-control"></td>
                                        <td><input type="text" name="weapon_3_notes" value="{{ character.weapon_3_notes if character else '' }}" class="form-control"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="btn-group no-print">
                    <button type="button" class="btn" onclick="saveCharacter()">Сохранить персонажа</button>
                    <button type="button" class="btn" onclick="saveAndGeneratePDF()">Сохранить и скачать PDF</button>
                    <button type="button" class="btn" onclick="window.location.href='/'">Главная</button>
                    {% if character %}
                    <button type="button" class="btn" onclick="deleteCharacter({{ character.id }})">Удалить</button>
                    {% endif %}
                </div>
            </form>
        </div>
    </div>

    <script>
        // Сохранение персонажа
        async function saveCharacter() {
            const form = document.getElementById('characterForm');
            const formData = new FormData(form);
            const data = {};
            
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            try {
                const response = await fetch('/api/character', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    alert('Персонаж сохранен!');
                    if (!data.id) {
                        window.location.href = `/character?id=${result.id}`;
                    }
                } else {
                    alert('Ошибка сохранения: ' + result.error);
                }
            } catch (error) {
                alert('Ошибка сети: ' + error);
            }
        }

        // Сохранить и сгенерировать PDF
        async function saveAndGeneratePDF() {
            const form = document.getElementById('characterForm');
            const formData = new FormData(form);
            const data = {};
            
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            try {
                const response = await fetch('/api/character', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    // Если персонаж новый, обновляем URL
                    if (!data.id) {
                        window.location.href = `/character?id=${result.id}&download_pdf=1`;
                    } else {
                        // Если персонаж существующий, сразу скачиваем PDF
                        window.open(`/character/${data.id}/pdf`, '_blank');
                    }
                } else {
                    alert('Ошибка сохранения: ' + result.error);
                }
            } catch (error) {
                alert('Ошибка сети: ' + error);
            }
        }

        // Удаление персонажа
        async function deleteCharacter(characterId) {
            if (confirm('Удалить этого персонажа?')) {
                try {
                    const response = await fetch(`/api/delete/character/${characterId}`, {
                        method: 'DELETE'
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        alert('Персонаж удален');
                        window.location.href = '/';
                    } else {
                        alert('Ошибка удаления: ' + result.error);
                    }
                } catch (error) {
                    alert('Ошибка сети: ' + error);
                }
            }
        }
    </script>
</body>
</html>