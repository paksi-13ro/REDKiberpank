<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Лист персонажа - {{ data.name }}</title>
    <style>
        /* Общие стили */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', Courier, monospace;
            color: #333;
        }

        @page {
            size: A4 landscape;
            margin: 15mm;
        }

        body {
            background: white;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 30px;
            width: 297mm;
            height: 210mm;
        }

        .page {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            background: white;
            padding: 25px;
            border: 4px solid #e63946;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            page-break-after: always;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e63946;
        }

        .page-title {
            font-size: 24px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .cyberpunk-logo {
            font-family: 'Arial Black', Gadget, sans-serif;
            font-size: 20px;
            font-weight: bold;
            color: #e63946;
            letter-spacing: 1px;
        }

        .border-frame {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border: 3px solid #e63946;
            border-radius: 8px;
            pointer-events: none;
            z-index: -1;
        }

        .footer-line {
            position: absolute;
            bottom: 5px;
            left: 0;
            right: 0;
            height: 8px;
            background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxwYXRoIGQ9Ik0wLDUgTDEwLDIwIEwxNSwxMCBMMjAsMzAgTDI1LDEwIEwyOCwyMCBMMywzMCBMNSw1IEw3LDIwIEw5LDEwIEwxMSwzMCBMMTMsMTAgTDE1LDIwIEwxNywxMCBMMTksMzAgTDIxLDEwIEwyMywyMCBMNDUsMzAgTDQ3LDEwIEw0OSwyMCBMNTAsMTAgTDUyLDIwIEw1NCwxMCBMNTYsMjAgTDU4LDEwIEw2MCwyMCBMNjIsMTAgTDY0LDIwIEw2NiwxMCBMNjgsMjAgTDcwLDEwIEw3MiwyMCBMNzQsMTAgTDc2LDIwIEw3OCwxMCBMODAsMjAgTDgyLDEwIEw4NCwyMCBMODYsMTAgTDg4LDIwIEw5MCwxMCBMOTIsMjAgTDk0LDEwIEw5NiwyMCBMOTgtMTAgTDEwMCwyMCIgc3Ryb2tlPSIjZTYzOTQ2IiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiLz48L3N2Zz4=');
            background-repeat: repeat-x;
            background-position: bottom;
        }

        /* Основные блоки */
        .section {
            margin-bottom: 20px;
            border: 2px solid #e63946;
            border-radius: 5px;
            padding: 10px;
            background: #fff;
        }

        .section-title {
            background: #000;
            color: white;
            padding: 5px 10px;
            font-size: 14px;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 10px;
            border-radius: 3px;
        }

        .row {
            display: flex;
            margin: 0 -5px;
        }

        .col {
            padding: 0 5px;
            flex: 1;
        }

        .field {
            margin-bottom: 8px;
            padding: 5px;
            border: 1px solid #e63946;
            border-radius: 3px;
            background: white;
            min-height: 20px;
        }

        .field-label {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 12px;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 5px;
        }

        .table th,
        .table td {
            border: 1px solid #e63946;
            padding: 5px;
            text-align: left;
            font-size: 12px;
        }

        .table th {
            background: #000;
            color: white;
            font-weight: bold;
            text-transform: uppercase;
        }

        .stat-column {
            width: 30px;
            text-align: center;
        }

        .checkbox {
            display: inline-block;
            width: 12px;
            height: 12px;
            border: 1px solid #e63946;
            margin-right: 5px;
            vertical-align: middle;
        }

        .red-box {
            background: #e63946;
            color: white;
            padding: 2px 5px;
            font-size: 10px;
            font-weight: bold;
            display: inline-block;
            margin-left: 5px;
        }

        .note {
            font-size: 12px;
            margin-top: 10px;
            line-height: 1.4;
        }

        /* Новый стиль для одной страницы */
        .character-info {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .avatar-box {
            width: 150px;
            height: 150px;
            border: 2px solid #e63946;
            background: #f8f8f8;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #666;
        }

        .stats-vertical {
            display: flex;
            flex-direction: column;
            gap: 5px;
            width: 60px;
        }

        .stat-box {
            padding: 5px;
            border: 1px solid #e63946;
            background: white;
            min-height: 25px;
            text-align: center;
        }

        .stat-name {
            font-size: 10px;
            text-transform: uppercase;
            margin-bottom: 3px;
            font-weight: bold;
        }

        .stat-value {
            font-size: 16px;
            font-weight: bold;
        }

        .character-details {
            flex: 1;
        }

        .skills-section {
            width: 40%;
            float: right;
        }

        .health-section {
            clear: both;
        }

        .weapons-section {
            clear: both;
            margin-top: 20px;
        }

        .weapons-table {
            margin-top: 10px;
        }

        .weapons-table th:first-child {
            width: 40%;
        }

        .weapons-table th:nth-child(2),
        .weapons-table th:nth-child(3) {
            width: 15%;
        }

        .weapons-table th:last-child {
            width: 15%;
        }

        /* Адаптивность */
        @media print {
            .page {
                break-after: page;
                box-shadow: none;
            }
            
            body {
                padding: 0;
            }
        }

        @media (max-width: 768px) {
            .page {
                padding: 10px;
            }
            .section {
                padding: 5px;
            }
            .field {
                padding: 3px;
            }
            .table th,
            .table td {
                padding: 3px;
                font-size: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="character-sheet">
        <!-- Одна страница -->
        <div class="page">
            <div class="border-frame"></div>
            <div class="footer-line"></div>
            <div class="page-header">
                <div class="page-title">Лист персонажа</div>
                <div class="cyberpunk-logo">CYBERPUNK RED</div>
            </div>

            <div class="character-info">
                <div class="avatar-box">Аватар персонажа</div>
                
                <div class="stats-vertical">
                    <div class="stat-box">
                        <div class="stat-name">ИНТ</div>
                        <div class="stat-value">{{ data.get('stat_intelligence', '—') }}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-name">РЕА</div>
                        <div class="stat-value">{{ data.get('stat_reflexes', '—') }}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-name">ЛВК</div>
                        <div class="stat-value">{{ data.get('stat_luck', '—') }}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-name">ТЕХ</div>
                        <div class="stat-value">{{ data.get('stat_technique', '—') }}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-name">ХАР</div>
                        <div class="stat-value">{{ data.get('stat_charisma', '—') }}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-name">ВОЛЯ</div>
                        <div class="stat-value">{{ data.get('stat_willpower', '—') }}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-name">УДЧ</div>
                        <div class="stat-value">{{ data.get('stat_udch', '—') }}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-name">СКО</div>
                        <div class="stat-value">{{ data.get('stat_sko', '—') }}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-name">ТЕЛ</div>
                        <div class="stat-value">{{ data.get('stat_tel', '—') }}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-name">ЭМП</div>
                        <div class="stat-value">{{ data.get('stat_empathy', '—') }}</div>
                    </div>
                </div>
                
                <div class="character-details">
                    <div class="field"><span class="field-label">Имя</span> {{ data.name or '' }}</div>
                    <div class="field"><span class="field-label">Роль</span> {{ data.role or '' }}</div>
                    <div class="field"><span class="field-label">Особая способность</span> <span class="red-box">{{ data.ability or 'НАЗВАНИЕ' }}</span></div>
                    <div class="field"><span class="field-label">Заметки</span> {{ data.notes or '' }}</div>
                    
                    <div class="field" style="display: flex; align-items: center;">
                        <span class="field-label">Человечность</span>
                        <span class="red-box" style="margin-left: 10px;">{{ data.get('humanity_current', 'СЦ') }}</span>
                    </div>
                </div>
                
                <div class="skills-section">
                    <div class="section">
                        <div class="section-title">Навыки</div>
                        
                        <div class="row">
                            <div class="col">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Навык</th>
                                            <th class="stat-column">УР</th>
                                            <th class="stat-column">STAT</th>
                                            <th class="stat-column">СУМ</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr><td>Концентрация (Воля)</td><td>{{ data.get('skill_concentration_level', '') }}</td><td>{{ data.get('skill_concentration_stat', '') }}</td><td>{{ data.get('skill_concentration_sum', '') }}</td></tr>
                                        <tr><td>Слух/Обоняние (ИНТ)</td><td>{{ data.get('skill_hearing_level', '') }}</td><td>{{ data.get('skill_hearing_stat', '') }}</td><td>{{ data.get('skill_hearing_sum', '') }}</td></tr>
                                        <tr><td>Чтение по губам (ИНТ)</td><td>{{ data.get('skill_lip_reading_level', '') }}</td><td>{{ data.get('skill_lip_reading_stat', '') }}</td><td>{{ data.get('skill_lip_reading_sum', '') }}</td></tr>
                                        <tr><td>Внимательность (ИНТ)</td><td>{{ data.get('skill_attention_level', '') }}</td><td>{{ data.get('skill_attention_stat', '') }}</td><td>{{ data.get('skill_attention_sum', '') }}</td></tr>
                                        <tr><td>Выслеживание (ИНТ)</td><td>{{ data.get('skill_tracking_level', '') }}</td><td>{{ data.get('skill_tracking_stat', '') }}</td><td>{{ data.get('skill_tracking_sum', '') }}</td></tr>
                                        <tr><td>Атлетика (ЛВК)</td><td>{{ data.get('skill_athletics_level', '') }}</td><td>{{ data.get('skill_athletics_stat', '') }}</td><td>{{ data.get('skill_athletics_sum', '') }}</td></tr>
                                        <tr><td>Акробатика (ЛВК)</td><td>{{ data.get('skill_acrobatics_level', '') }}</td><td>{{ data.get('skill_acrobatics_stat', '') }}</td><td>{{ data.get('skill_acrobatics_sum', '') }}</td></tr>
                                        <tr><td>Точность (ЛВК)</td><td>{{ data.get('skill_accuracy_level', '') }}</td><td>{{ data.get('skill_accuracy_stat', '') }}</td><td>{{ data.get('skill_accuracy_sum', '') }}</td></tr>
                                        <tr><td>Выносливость (ВОЛЯ)</td><td>{{ data.get('skill_endurance_level', '') }}</td><td>{{ data.get('skill_endurance_stat', '') }}</td><td>{{ data.get('skill_endurance_sum', '') }}</td></tr>
                                        <tr><td>Сопр. пыткам (ВОЛЯ)</td><td>{{ data.get('skill_resistance_level', '') }}</td><td>{{ data.get('skill_resistance_stat', '') }}</td><td>{{ data.get('skill_resistance_sum', '') }}</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="health-section">
                <div class="row">
                    <div class="col">
                        <div class="section">
                            <div class="section-title">Пункты здоровья</div>
                            <div class="field" style="display: flex; align-items: center;">
                                <span>Пункты здоровья</span>
                                <span class="red-box" style="margin-left: 10px;">{{ data.get('health_points_current', 'СЦ') }}</span>
                            </div>
                            <div class="field"><span class="field-label">Тяжёлое ранение</span> {{ data.get('serious_injury', '') }}</div>
                            <div class="field"><span class="field-label">-2 на все Действия с Тяжёлым ранением</span> {{ data.get('heavy_injury_penalty', '') }}</div>
                            <div class="field"><span class="field-label">Испытание против смерти</span> {{ data.get('death_save', '') }}</div>
                            
                            <div class="section-title" style="margin-top: 15px;">Критические травмы</div>
                            <div class="field"><span class="field-label">Зависимости</span> {{ data.get('dependencies', '') }}</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="weapons-section">
                <div class="section">
                    <div class="section-title">ОРУЖИЕ и БРОНЯ</div>
                    <div class="row">
                        <div class="col">
                            <div class="section-title">Броня</div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Защита головы</th>
                                        <th class="stat-column">ОС</th>
                                        <th class="stat-column">Штраф</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td>{{ data.get('armor_head', '') }}</td><td>{{ data.get('armor_head_sp', '') }}</td><td>{{ data.get('armor_head_penalty', '') }}</td></tr>
                                    <tr><td>{{ data.get('armor_body', '') }}</td><td>{{ data.get('armor_body_sp', '') }}</td><td>{{ data.get('armor_body_penalty', '') }}</td></tr>
                                    <tr><td>{{ data.get('armor_shield', '') }}</td><td>{{ data.get('armor_shield_sp', '') }}</td><td>{{ data.get('armor_shield_penalty', '') }}</td></tr>
                                </tbody>
                            </table>
                            <div class="field" style="font-size: 10px; margin-top: 5px;">
                                Штрафы применяются к РЕА, ЛВК и СКО
                            </div>
                        </div>
                        <div class="col">
                            <div class="section-title">Оружие</div>
                            <table class="table weapons-table">
                                <thead>
                                    <tr>
                                        <th>Оружие</th>
                                        <th>Урон</th>
                                        <th>Боепр.</th>
                                        <th>ROF</th>
                                        <th>Заметки</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td>{{ data.get('weapon_1_name', '') }}</td><td>{{ data.get('weapon_1_damage', '') }}</td><td>{{ data.get('weapon_1_ammo', '') }}</td><td>{{ data.get('weapon_1_rof', '') }}</td><td>{{ data.get('weapon_1_notes', '') }}</td></tr>
                                    <tr><td>{{ data.get('weapon_2_name', '') }}</td><td>{{ data.get('weapon_2_damage', '') }}</td><td>{{ data.get('weapon_2_ammo', '') }}</td><td>{{ data.get('weapon_2_rof', '') }}</td><td>{{ data.get('weapon_2_notes', '') }}</td></tr>
                                    <tr><td>{{ data.get('weapon_3_name', '') }}</td><td>{{ data.get('weapon_3_damage', '') }}</td><td>{{ data.get('weapon_3_ammo', '') }}</td><td>{{ data.get('weapon_3_rof', '') }}</td><td>{{ data.get('weapon_3_notes', '') }}</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>